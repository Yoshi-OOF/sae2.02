package Exo3;

public class Date {
    private int jour;
    private int mois;
    private int annee;

    public static final int ANNEE_MIN = 1900;

    public Date(int jour, int mois, int annee) throws DateException {
        if (!estValide(jour, mois, annee)) {
            throw new DateException("Date invalide: " + jour + "/" + mois + "/" + annee);
        }
        this.jour = jour;
        this.mois = mois;
        this.annee = annee;
    }

    private boolean estValide(int jour, int mois, int annee) {
        if (annee < ANNEE_MIN) return false;
        if (mois < 1 || mois > 12) return false;
        int joursDansMois = nombreDeJoursDansMois(mois, annee);
        return jour >= 1 && jour <= joursDansMois;
    }

    private int nombreDeJoursDansMois(int mois, int annee) {
        switch (mois) {
            case 4: case 6: case 9: case 11: return 30;
            case 2: return (estBissextile(annee) ? 29 : 28);
            default: return 31;
        }
    }

    private boolean estBissextile(int annee) {
        return (annee % 4 == 0 && annee % 100 != 0) || (annee % 400 == 0);
    }

    public void demain() {
        if (jour < nombreDeJoursDansMois(mois, annee)) {
            jour++;
        } else if (mois < 12) {
            jour = 1;
            mois++;
        } else {
            jour = 1;
            mois = 1;
            annee++;
        }
    }

    @Override
    public String toString() {
        return String.format("%02d/%02d/%04d", jour, mois, annee);
    }

	public Object getJour() {
		return jour;
	}

	public Object getMois() {
		return mois;
	}

}
